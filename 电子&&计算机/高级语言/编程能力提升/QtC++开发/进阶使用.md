
#  Qt C++ 10ä¸ªå®æˆ˜æ¡ˆä¾‹ï¼ˆé™„æ ¸å¿ƒAPIæ‹†è§£+çº¯C++å¯¹æ¯”+é¿å‘æŒ‡å—ï¼‰


ä¹‹å‰çš„5ä¸ªä¾‹å­å¸®ä½ å…¥é—¨äº†Qtçš„åŸºç¡€ï¼Œè¿™æ¬¡å’±ä»¬åŠ 10ä¸ª**æ›´è´´è¿‘å®é™…å¼€å‘åœºæ™¯**çš„æ¡ˆä¾‹ï¼Œè¦†ç›–å¸ƒå±€ç®¡ç†ã€è‡ªå®šä¹‰æ§ä»¶ã€ç½‘ç»œé€šä¿¡ã€æ•°æ®åº“æ“ä½œç­‰é«˜é¢‘éœ€æ±‚ï¼Œæ¯ä¸ªæ¡ˆä¾‹éƒ½å¸¦â€œä¸ºä»€ä¹ˆç”¨Qtâ€çš„å¯¹æ¯”åˆ†æï¼Œå¸®ä½ å½»åº•æ‰“é€šâ€œç†è§£â†’åº”ç”¨â€çš„ä»»ç£äºŒè„‰ï¼


---


## æ¡ˆä¾‹6ï¼šå¸ƒå±€ç®¡ç†â€”â€”è®©ç•Œé¢è‡ªåŠ¨é€‚é…å±å¹•ï¼ˆvs æ‰‹åŠ¨è®¡ç®—åæ ‡ï¼‰


### çŸ¥è¯†ç‚¹ï¼šQtå¸ƒå±€ç±» vs çº¯C++æ‰‹åŠ¨å®šä½  
åšå›¾å½¢ç•Œé¢æœ€å¤´ç–¼çš„æ˜¯â€œå±å¹•åˆ†è¾¨ç‡å˜äº†ï¼Œæ§ä»¶ä½ç½®å…¨ä¹±â€ã€‚Qtçš„**å¸ƒå±€ç±»**ï¼ˆ`QLayout`å®¶æ—ï¼‰èƒ½è‡ªåŠ¨æ’åˆ—æ§ä»¶ï¼Œé€‚åº”çª—å£å¤§å°å˜åŒ–ï¼›è€Œçº¯C++éœ€è¦æ‰‹åŠ¨è®¡ç®—æ¯ä¸ªæ§ä»¶çš„åæ ‡ï¼ˆç´¯åˆ°å“­ï¼‰ã€‚  


#### ä¾‹å­6ï¼šç™»å½•ç•Œé¢å¸ƒå±€ï¼ˆQVBoxLayout+QHBoxLayoutç»„åˆï¼‰  
```cpp
#include <QApplication>
#include <QWidget>
#include <QVBoxLayout>  // å‚ç›´å¸ƒå±€ï¼ˆä¸Šä¸‹æ’åˆ—ï¼‰
#include <QHBoxLayout>  // æ°´å¹³å¸ƒå±€ï¼ˆå·¦å³æ’åˆ—ï¼‰
#include <QLabel>
#include <QLineEdit>    // è¾“å…¥æ¡†
#include <QPushButton>

int main(int argc, char *argv[]) {
    QApplication app(argc, argv);

    QWidget window;
    window.setWindowTitle("ç™»å½•ç•Œé¢");

    // 1. åˆ›å»ºæ§ä»¶
    QLabel *userLabel = new QLabel("ç”¨æˆ·åï¼š");
    QLineEdit *userEdit = new QLineEdit;
    QLabel *pwdLabel = new QLabel("å¯†ç ï¼š");
    QLineEdit *pwdEdit = new QLineEdit;
    pwdEdit->setEchoMode(QLineEdit::Password); // å¯†ç è¾“å…¥æ¨¡å¼ï¼ˆæ˜¾ç¤ºâ—ï¼‰
    QPushButton *loginBtn = new QPushButton("ç™»å½•");

    // 2. ç”¨å‚ç›´å¸ƒå±€ä½œä¸ºä¸»å¸ƒå±€ï¼ˆæ•´ä½“ä¸Šä¸‹æ’åˆ—ï¼‰
    QVBoxLayout *mainLayout = new QVBoxLayout(&window);

    // 3. ç”¨æˆ·åè¡Œï¼šæ°´å¹³å¸ƒå±€ï¼ˆæ ‡ç­¾+è¾“å…¥æ¡†å·¦å³æ’åˆ—ï¼‰
    QHBoxLayout *userLayout = new QHBoxLayout;
    userLayout->addWidget(userLabel); // æ·»åŠ æ ‡ç­¾
    userLayout->addWidget(userEdit);  // æ·»åŠ è¾“å…¥æ¡†
    mainLayout->addLayout(userLayout); // æŠŠæ°´å¹³å¸ƒå±€åŠ å…¥ä¸»å‚ç›´å¸ƒå±€

    // 4. å¯†ç è¡Œï¼šåŒç†
    QHBoxLayout *pwdLayout = new QHBoxLayout;
    pwdLayout->addWidget(pwdLabel);
    pwdLayout->addWidget(pwdEdit);
    mainLayout->addLayout(pwdLayout);

    // 5. ç™»å½•æŒ‰é’®ï¼šå•ç‹¬ä¸€è¡Œï¼ˆå‚ç›´å¸ƒå±€è‡ªåŠ¨å±…ä¸­ï¼‰
    mainLayout->addWidget(loginBtn);

    window.show();
    return app.exec();
}
```


#### çº¯C++å¯¹æ¯”ï¼šæ‰‹åŠ¨å®šä½æ§ä»¶ï¼ˆWin32 APIç¤ºä¾‹ï¼‰  
```cpp
// çº¯C++ä¼ªä»£ç ï¼ˆWin32ï¼‰
LRESULT CALLBACK WindowProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam) {
    static HWND userLabel, userEdit, pwdLabel, pwdEdit, loginBtn;

    if (uMsg == WM_CREATE) {
        // æ‰‹åŠ¨è®¡ç®—åæ ‡ï¼ˆçª—å£å®½åº¦200ï¼Œé«˜åº¦150ï¼‰
        userLabel = CreateWindow(L"STATIC", L"ç”¨æˆ·åï¼š", WS_VISIBLE|WS_CHILD, 
                                10, 20, 60, 20, hwnd, NULL, NULL, NULL);
        userEdit = CreateWindow(L"EDIT", L"", WS_VISIBLE|WS_CHILD|WS_BORDER, 
                                80, 20, 100, 20, hwnd, NULL, NULL, NULL);
        pwdLabel = CreateWindow(L"STATIC", L"å¯†ç ï¼š", WS_VISIBLE|WS_CHILD, 
                                10, 50, 60, 20, hwnd, NULL, NULL, NULL);
        pwdEdit = CreateWindow(L"EDIT", L"", WS_VISIBLE|WS_CHILD|WS_BORDER|ES_PASSWORD, 
                                80, 50, 100, 20, hwnd, NULL, NULL, NULL);
        loginBtn = CreateWindow(L"BUTTON", L"ç™»å½•", WS_VISIBLE|WS_CHILD, 
                                70, 80, 60, 30, hwnd, NULL, NULL, NULL);
    }
    return DefWindowProc(hwnd, uMsg, wParam, lParam);
}
```


**å…³é”®APIè®²è§£**ï¼š  
- `QVBoxLayout`/`QHBoxLayout`ï¼šå‚ç›´/æ°´å¹³å¸ƒå±€ç±»ï¼Œ`addWidget()`æ·»åŠ æ§ä»¶ï¼Œ`addLayout()`æ·»åŠ å­å¸ƒå±€ã€‚  
- `QLineEdit::setEchoMode(QLineEdit::Password)`ï¼šè®¾ç½®è¾“å…¥æ¡†ä¸ºå¯†ç æ¨¡å¼ï¼ˆæ˜¾ç¤ºåœ†ç‚¹ï¼‰ã€‚  


**æ˜“æ··æ·†ç‚¹**ï¼š  
- å¸ƒå±€çš„çˆ¶å¯¹è±¡ï¼šå¸ƒå±€éœ€è¦è®¾ç½®ç»™çˆ¶çª—å£ï¼ˆå¦‚`new QVBoxLayout(&window)`ï¼‰ï¼Œå¦åˆ™æ§ä»¶ä¸ä¼šè‡ªåŠ¨æ’åˆ—ã€‚  
- çº¯C++æ‰‹åŠ¨å®šä½çš„ç—›ç‚¹ï¼šçª—å£å¤§å°å˜åŒ–æ—¶ï¼Œéœ€è¦é‡å†™`WM_SIZE`äº‹ä»¶é‡æ–°è®¡ç®—æ‰€æœ‰æ§ä»¶åæ ‡ï¼ˆQtå¸ƒå±€è‡ªåŠ¨å¤„ç†ï¼ï¼‰ã€‚  


---


## æ¡ˆä¾‹7ï¼šè‡ªå®šä¹‰æ§ä»¶â€”â€”ç”»ä¸€ä¸ªä»ªè¡¨ç›˜ï¼ˆé‡å†™paintEventï¼‰  


### çŸ¥è¯†ç‚¹ï¼šQPainterç»˜å›¾ vs çº¯C++ GDIç»˜å›¾  
Qtçš„`QPainter`ç±»å°è£…äº†2Dç»˜å›¾APIï¼Œæ”¯æŒæŠ—é”¯é½¿ã€æ¸å˜ã€è·¯å¾„ç­‰é«˜çº§ç‰¹æ€§ï¼›çº¯C++ç”¨GDIæˆ–GDI+éœ€è¦å†™å¤§é‡æ¨¡æ¿ä»£ç ã€‚  


#### ä¾‹å­7ï¼šè‡ªå®šä¹‰ä»ªè¡¨ç›˜æ§ä»¶ï¼ˆç»§æ‰¿QWidgetï¼‰  
```cpp
// GaugeWidget.h
#include <QWidget>
#include <QPainter>  // ç»˜å›¾ç±»
#include <QTimer>    // å®šæ—¶å™¨ï¼ˆæ¨¡æ‹Ÿæ•°æ®å˜åŒ–ï¼‰

class GaugeWidget : public QWidget {
    Q_OBJECT
public:
    GaugeWidget(QWidget *parent = nullptr) : QWidget(parent) {
        // å¯åŠ¨å®šæ—¶å™¨ï¼Œæ¯500msæ›´æ–°ä¸€æ¬¡æ•°æ®
        QTimer *timer = new QTimer(this);
        connect(timer, &QTimer::timeout, this, &GaugeWidget::updateValue);
        timer->start(500);
    }

    // è®¾ç½®å½“å‰å€¼ï¼ˆ0-100ï¼‰
    void setValue(int value) {
        m_value = qBound(0, value, 100); // é™åˆ¶åœ¨0-100ä¹‹é—´
        update(); // è§¦å‘é‡ç»˜
    }

protected:
    void paintEvent(QPaintEvent *) override {
        QPainter painter(this);
        painter.setRenderHint(QPainter::Antialiasing); // æŠ—é”¯é½¿ï¼ˆå›¾å½¢æ›´å¹³æ»‘ï¼‰

        // 1. ç”»èƒŒæ™¯åœ†
        painter.setBrush(QColor(240, 240, 240)); // æµ…ç°è‰²èƒŒæ™¯
        painter.drawEllipse(rect().adjusted(10, 10, -10, -10)); // è°ƒæ•´è¾¹ç•Œï¼Œç•™è¾¹è·

        // 2. ç”»åˆ»åº¦ï¼ˆ0-100ï¼Œæ¯10åº¦ä¸€ä¸ªå¤§åˆ»åº¦ï¼‰
        painter.translate(width()/2, height()/2); // åæ ‡åŸç‚¹ç§»åˆ°ä¸­å¿ƒ
        painter.rotate(-90); // è®©0åº¦æŒ‡å‘é¡¶éƒ¨ï¼ˆé»˜è®¤0åº¦æ˜¯å³ä¾§ï¼‰
        for (int i = 0; i <= 100; i += 10) {
            painter.rotate(3.6); // 100åˆ»åº¦å¯¹åº”360åº¦ â†’ æ¯åˆ»åº¦3.6åº¦
            painter.setPen(i % 50 == 0 ? Qt::red : Qt::black); // 50åˆ»åº¦çº¢è‰²
            painter.drawLine(0, -80, 0, -90); // åˆ»åº¦çº¿é•¿åº¦10åƒç´ 
        }

        // 3. ç”»æŒ‡é’ˆï¼ˆæ ¹æ®å½“å‰å€¼æ—‹è½¬ï¼‰
        painter.rotate(-m_value * 3.6); // æŒ‡é’ˆè§’åº¦ = å½“å‰å€¼Ã—3.6åº¦
        painter.setBrush(Qt::red);
        painter.drawConvexPolygon({  // ç”»ä¸€ä¸ªä¸‰è§’å½¢æŒ‡é’ˆ
            QPoint(0, 0),
            QPoint(8, 10),
            QPoint(-8, 10),
            QPoint(0, -70) // æŒ‡é’ˆé•¿åº¦70åƒç´ 
        });
    }

private slots:
    void updateValue() {
        static int value = 0;
        value = (value + 10) % 101; // 0â†’10â†’20...â†’100â†’0å¾ªç¯
        setValue(value);
    }

private:
    int m_value = 0;
};

// main.cpp
#include <QApplication>
#include "GaugeWidget.h"

int main(int argc, char *argv[]) {
    QApplication app(argc, argv);
    GaugeWidget gauge;
    gauge.resize(300, 300); // è®¾ç½®æ§ä»¶å¤§å°
    gauge.show();
    return app.exec();
}
```


#### çº¯C++å¯¹æ¯”ï¼šç”¨GDIç»˜åˆ¶ä»ªè¡¨ç›˜ï¼ˆä»£ç é‡æ˜¯Qtçš„3å€+ï¼‰  
```cpp
// çº¯C++ä¼ªä»£ç ï¼ˆWin32 GDIï¼‰
LRESULT CALLBACK WindowProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam) {
    if (uMsg == WM_PAINT) {
        PAINTSTRUCT ps;
        HDC hdc = BeginPaint(hwnd, &ps);
        // æ‰‹åŠ¨åˆ›å»ºç”»åˆ·ã€ç”»ç¬”
        HBRUSH bgBrush = CreateSolidBrush(RGB(240, 240, 240));
        SelectObject(hdc, bgBrush);
        Ellipse(hdc, 10, 10, 290, 290); // ç”»èƒŒæ™¯åœ†ï¼ˆåæ ‡éœ€æ‰‹åŠ¨è®¡ç®—ï¼‰
        // ç”»åˆ»åº¦ï¼šéœ€è¦æ‰‹åŠ¨è®¡ç®—æ¯ä¸ªåˆ»åº¦çš„åæ ‡ï¼Œæ— æŠ—é”¯é½¿...
        EndPaint(hwnd, &ps);
    }
    return DefWindowProc(hwnd, uMsg, wParam, lParam);
}
```


**å…³é”®APIè®²è§£**ï¼š  
- `QPainter::setRenderHint(QPainter::Antialiasing)`ï¼šå¯ç”¨æŠ—é”¯é½¿ï¼Œå›¾å½¢è¾¹ç¼˜æ›´å¹³æ»‘ï¼ˆçº¯C++éœ€è¦é¢å¤–è®¾ç½®ï¼‰ã€‚  
- `QPainter::translate()`/`rotate()`ï¼šåæ ‡å˜æ¢ï¼Œç®€åŒ–å¤æ‚å›¾å½¢çš„ç»˜åˆ¶ï¼ˆæ— éœ€æ‰‹åŠ¨è®¡ç®—æ¯ä¸ªç‚¹çš„ç»å¯¹åæ ‡ï¼‰ã€‚  


**æ˜“æ··æ·†ç‚¹**ï¼š  
- `paintEvent`æ˜¯é‡ç»˜çš„æ ¸å¿ƒå‡½æ•°ï¼Œä»»ä½•ç•Œé¢å˜åŒ–ï¼ˆå¦‚`setValue`åè°ƒç”¨`update()`ï¼‰éƒ½ä¼šè§¦å‘å®ƒã€‚  
- Qtçš„åæ ‡åŸç‚¹é»˜è®¤åœ¨å·¦ä¸Šè§’ï¼ˆå’Œå±å¹•ä¸€è‡´ï¼‰ï¼Œ`translate(width()/2, height()/2)`å°†åŸç‚¹ç§»åˆ°æ§ä»¶ä¸­å¿ƒï¼Œæ–¹ä¾¿ç”»å¯¹ç§°å›¾å½¢ã€‚  


---


## æ¡ˆä¾‹8ï¼šæ–‡ä»¶æ“ä½œâ€”â€”è¯»å–CSVè¡¨æ ¼æ•°æ®ï¼ˆQFile+QTextStreamï¼‰  


### çŸ¥è¯†ç‚¹ï¼šQtæ–‡ä»¶æ“ä½œ vs çº¯C++ fstream  
Qtçš„`QFile`å’Œ`QTextStream`æ”¯æŒè‡ªåŠ¨ç¼–ç ï¼ˆé»˜è®¤UTF-8ï¼‰ï¼Œä¸”æä¾›æ›´å‹å¥½çš„æŒ‰è¡Œè¯»å–æ¥å£ï¼›çº¯C++çš„`std::fstream`éœ€è¦æ‰‹åŠ¨å¤„ç†ç¼–ç å’Œæ¢è¡Œç¬¦å·®å¼‚ã€‚  


#### ä¾‹å­8ï¼šè¯»å–CSVæ–‡ä»¶å¹¶æ˜¾ç¤ºï¼ˆæ¨¡æ‹ŸExcelè¡¨æ ¼ï¼‰  
```cpp
#include <QApplication>
#include <QTableWidget> // è¡¨æ ¼æ§ä»¶
#include <QFile>
#include <QTextStream>
#include <QVBoxLayout>

int main(int argc, char *argv[]) {
    QApplication app(argc, argv);

    QWidget window;
    QVBoxLayout *layout = new QVBoxLayout(&window);
    QTableWidget *table = new QTableWidget;
    layout->addWidget(table);

    // 1. æ‰“å¼€CSVæ–‡ä»¶ï¼ˆå‡è®¾æ–‡ä»¶å†…å®¹ï¼š"å§“å,å¹´é¾„,åŸå¸‚\nå¼ ä¸‰,25,åŒ—äº¬\næå››,30,ä¸Šæµ·"ï¼‰
    QFile file("data.csv");
    if (!file.open(QIODevice::ReadOnly | QIODevice::Text)) {
        qDebug() << "æ— æ³•æ‰“å¼€æ–‡ä»¶";
        return 1;
    }

    // 2. ç”¨QTextStreamæŒ‰è¡Œè¯»å–
    QTextStream in(&file);
    QStringList headers = in.readLine().split(','); // ç¬¬ä¸€è¡Œæ˜¯è¡¨å¤´
    table->setColumnCount(headers.size());
    table->setHorizontalHeaderLabels(headers); // è®¾ç½®è¡¨æ ¼è¡¨å¤´

    int row = 0;
    while (!in.atEnd()) {
        QString line = in.readLine();
        QStringList fields = line.split(',');
        table->insertRow(row); // æ’å…¥æ–°è¡Œ
        for (int col = 0; col < fields.size(); ++col) {
            table->setItem(row, col, new QTableWidgetItem(fields[col]));
        }
        row++;
    }

    file.close();
    window.resize(400, 300);
    window.show();
    return app.exec();
}
```


#### çº¯C++å¯¹æ¯”ï¼šç”¨fstreamè¯»å–CSVï¼ˆå¤„ç†ç¼–ç å’Œæ¢è¡Œæ›´éº»çƒ¦ï¼‰  
```cpp
#include <fstream>
#include <vector>
#include <string>
#include <sstream>

int main() {
    std::ifstream file("data.csv");
    if (!file.is_open()) { /* é”™è¯¯å¤„ç† */ }

    std::vector<std::vector<std::string>> data;
    std::string line;
    while (std::getline(file, line)) {
        // æ‰‹åŠ¨å¤„ç†æ¢è¡Œç¬¦ï¼ˆWindowsæ˜¯\r\nï¼ŒLinuxæ˜¯\nï¼‰
        if (!line.empty() && line.back() == '\r') line.pop_back();
        std::vector<std::string> fields;
        std::stringstream ss(line);
        std::string field;
        while (std::getline(ss, field, ',')) {
            fields.push_back(field);
        }
        data.push_back(fields);
    }
    // åç»­éœ€è¦æ‰‹åŠ¨åˆ›å»ºè¡¨æ ¼æ˜¾ç¤ºï¼ˆçº¯C++æ— è‡ªå¸¦è¡¨æ ¼æ§ä»¶ï¼‰
}
```


**å…³é”®APIè®²è§£**ï¼š  
- `QFile::open(QIODevice::ReadOnly | QIODevice::Text)`ï¼š`Text`æ¨¡å¼ä¼šè‡ªåŠ¨è½¬æ¢æ¢è¡Œç¬¦ï¼ˆè·¨å¹³å°å…¼å®¹ï¼‰ã€‚  
- `QTextStream::readLine()`ï¼šè¯»å–ä¸€è¡Œæ–‡æœ¬ï¼ˆè‡ªåŠ¨è·³è¿‡æ¢è¡Œç¬¦ï¼‰ã€‚  


**æ˜“æ··æ·†ç‚¹**ï¼š  
- CSVæ–‡ä»¶çš„ç¼–ç ï¼šå¦‚æœæ–‡ä»¶æ˜¯GBKç¼–ç ï¼ŒQtéœ€è¦ç”¨`in.setCodec("GBK")`è®¾ç½®ç¼–ç ï¼ˆ`QTextStream`é»˜è®¤UTF-8ï¼‰ã€‚  
- `QTableWidget`æ˜¯Qtçš„è¡¨æ ¼æ§ä»¶ï¼Œçº¯C++éœ€è¦è‡ªå·±ç”¨`HWND`åˆ›å»º`ListView`æˆ–`DataGrid`ï¼ˆä»£ç é‡çˆ†ç‚¸ï¼‰ã€‚  


---


## æ¡ˆä¾‹9ï¼šç½‘ç»œé€šä¿¡â€”â€”ç®€å•TCPèŠå¤©ç¨‹åºï¼ˆQTcpSocket+QTcpServerï¼‰  


### çŸ¥è¯†ç‚¹ï¼šQtç½‘ç»œæ¨¡å— vs çº¯C++ BSD Socket  
Qtçš„`QTcpSocket`å’Œ`QTcpServer`å°è£…äº†åº•å±‚Socketæ“ä½œï¼Œé€šè¿‡ä¿¡å·æ§½å¤„ç†ç½‘ç»œäº‹ä»¶ï¼ˆå¦‚è¿æ¥ã€æ¥æ”¶æ•°æ®ï¼‰ï¼›çº¯C++éœ€è¦æ‰‹åŠ¨ç®¡ç†Socketæè¿°ç¬¦å’Œå¤šçº¿ç¨‹ã€‚  


#### ä¾‹å­9ï¼šTCPå®¢æˆ·ç«¯ï¼ˆå‘é€æ¶ˆæ¯ï¼‰+ æœåŠ¡å™¨ï¼ˆæ¥æ”¶æ¶ˆæ¯ï¼‰  
```cpp
// æœåŠ¡å™¨ç«¯ä»£ç ï¼ˆServer.cppï¼‰
#include <QApplication>
#include <QTcpServer>
#include <QTcpSocket>
#include <QTextEdit>  // æ–‡æœ¬æ¡†ï¼ˆæ˜¾ç¤ºæ¥æ”¶çš„æ¶ˆæ¯ï¼‰
#include <QVBoxLayout>

int main(int argc, char *argv[]) {
    QApplication app(argc, argv);

    QWidget window;
    QVBoxLayout *layout = new QVBoxLayout(&window);
    QTextEdit *logEdit = new QTextEdit;
    logEdit->setReadOnly(true);
    layout->addWidget(logEdit);

    QTcpServer server;
    if (!server.listen(QHostAddress::Any, 12345)) { // ç›‘å¬æ‰€æœ‰IPï¼Œç«¯å£12345
        logEdit->append("æœåŠ¡å™¨å¯åŠ¨å¤±è´¥ï¼");
        return 1;
    }
    logEdit->append("æœåŠ¡å™¨å·²å¯åŠ¨ï¼Œç­‰å¾…è¿æ¥...");

    // å½“æœ‰æ–°å®¢æˆ·ç«¯è¿æ¥æ—¶è§¦å‘
    QObject::connect(&server, &QTcpServer::newConnection, [&]() {
        QTcpSocket *client = server.nextPendingConnection(); // è·å–å®¢æˆ·ç«¯Socket
        logEdit->append("æ–°å®¢æˆ·ç«¯è¿æ¥ï¼š" + client->peerAddress().toString());

        // å½“å®¢æˆ·ç«¯å‘é€æ•°æ®æ—¶è§¦å‘
        QObject::connect(client, &QTcpSocket::readyRead, [client, logEdit]() {
            QString msg = client->readAll(); // è¯»å–æ‰€æœ‰æ•°æ®
            logEdit->append("æ”¶åˆ°æ¶ˆæ¯ï¼š" + msg);
        });
    });

    window.resize(400, 300);
    window.show();
    return app.exec();
}

// å®¢æˆ·ç«¯ä»£ç ï¼ˆClient.cppï¼‰
#include <QApplication>
#include <QTcpSocket>
#include <QLineEdit>
#include <QPushButton>
#include <QHBoxLayout>
#include <QVBoxLayout>

int main(int argc, char *argv[]) {
    QApplication app(argc, argv);

    QWidget window;
    QVBoxLayout *mainLayout = new QVBoxLayout(&window);

    QLineEdit *msgEdit = new QLineEdit; // è¾“å…¥æ¶ˆæ¯
    QPushButton *sendBtn = new QPushButton("å‘é€");
    QHBoxLayout *inputLayout = new QHBoxLayout;
    inputLayout->addWidget(msgEdit);
    inputLayout->addWidget(sendBtn);

    QTcpSocket socket;
    socket.connectToHost("127.0.0.1", 12345); // è¿æ¥æœ¬åœ°æœåŠ¡å™¨

    // å‘é€æŒ‰é’®ç‚¹å‡»äº‹ä»¶
    QObject::connect(sendBtn, &QPushButton::clicked, [&]() {
        QString msg = msgEdit->text();
        if (!msg.isEmpty()) {
            socket.write(msg.toUtf8()); // å‘é€UTF-8ç¼–ç çš„æ¶ˆæ¯
            msgEdit->clear(); // æ¸…ç©ºè¾“å…¥æ¡†
        }
    });

    mainLayout->addLayout(inputLayout);
    window.resize(400, 100);
    window.show();
    return app.exec();
}
```


#### çº¯C++å¯¹æ¯”ï¼šç”¨BSD Socketå®ç°ï¼ˆä»£ç é‡æ˜¯Qtçš„5å€+ï¼‰  
```cpp
// çº¯C++æœåŠ¡å™¨ä¼ªä»£ç ï¼ˆLinuxï¼‰
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <unistd.h>

int main() {
    int server_fd = socket(AF_INET, SOCK_STREAM, 0); // åˆ›å»ºSocket
    struct sockaddr_in address;
    address.sin_family = AF_INET;
    address.sin_addr.s_addr = INADDR_ANY;
    address.sin_port = htons(12345);
    bind(server_fd, (struct sockaddr *)&address, sizeof(address));
    listen(server_fd, 5);

    while (true) {
        int client_fd = accept(server_fd, NULL, NULL); // é˜»å¡ç­‰å¾…è¿æ¥
        char buffer[1024] = {0};
        read(client_fd, buffer, 1024); // é˜»å¡è¯»å–æ•°æ®
        printf("æ”¶åˆ°æ¶ˆæ¯ï¼š%s\n", buffer);
        close(client_fd);
    }
    close(server_fd);
}
```


**å…³é”®APIè®²è§£**ï¼š  
- `QTcpServer::listen()`ï¼šå¯åŠ¨æœåŠ¡å™¨ç›‘å¬æŒ‡å®šç«¯å£ã€‚  
- `QTcpSocket::readyRead`ï¼šå½“æœ‰æ•°æ®åˆ°è¾¾æ—¶è§¦å‘çš„ä¿¡å·ï¼ˆæ— éœ€æ‰‹åŠ¨è½®è¯¢ï¼‰ã€‚  


**æ˜“æ··æ·†ç‚¹**ï¼š  
- Qtç½‘ç»œæ“ä½œæ˜¯**å¼‚æ­¥**çš„ï¼ˆæ¯”å¦‚`connectToHost`ä¸ä¼šé˜»å¡ï¼Œè¿æ¥ç»“æœé€šè¿‡`connected`ä¿¡å·é€šçŸ¥ï¼‰ï¼›çº¯C++çš„`connect`/`read`æ˜¯é˜»å¡çš„ï¼Œéœ€è¦é…åˆå¤šçº¿ç¨‹ã€‚  
- æ•°æ®ç¼–ç ï¼š`socket.write(msg.toUtf8())`ç¡®ä¿è·¨å¹³å°ä¼ è¾“æ— ä¹±ç ï¼ˆçº¯C++éœ€è¦æ‰‹åŠ¨å¤„ç†ç¼–ç è½¬æ¢ï¼‰ã€‚  


---


## æ¡ˆä¾‹10ï¼šæ•°æ®åº“æ“ä½œâ€”â€”è¿æ¥SQLiteï¼ˆQSqlDatabase+QSqlQueryï¼‰  


### çŸ¥è¯†ç‚¹ï¼šQt SQLæ¨¡å— vs çº¯C++ SQLite C API  
Qtçš„`QSqlDatabase`å’Œ`QSqlQuery`å°è£…äº†æ•°æ®åº“è¿æ¥å’ŒæŸ¥è¯¢æ“ä½œï¼Œæ”¯æŒå¤šç§æ•°æ®åº“ï¼ˆSQLiteã€MySQLã€PostgreSQLç­‰ï¼‰ï¼Œä»£ç æ›´ç®€æ´ã€‚  


#### ä¾‹å­10ï¼šç”¨SQLiteå­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰  
```cpp
#include <QApplication>
#include <QSqlDatabase>    // æ•°æ®åº“è¿æ¥ç±»
#include <QSqlQuery>       // æ‰§è¡ŒSQLè¯­å¥ç±»
#include <QSqlError>       // é”™è¯¯å¤„ç†ç±»
#include <QDebug>

int main(int argc, char *argv[]) {
    QApplication app(argc, argv);

    // 1. è¿æ¥SQLiteæ•°æ®åº“ï¼ˆæ— éœ€å®‰è£…æœåŠ¡å™¨ï¼Œæ–‡ä»¶å³æ•°æ®åº“ï¼‰
    QSqlDatabase db = QSqlDatabase::addDatabase("QSQLITE");
    db.setDatabaseName("user.db"); // æ•°æ®åº“æ–‡ä»¶åä¸ºuser.db
    if (!db.open()) {
        qDebug() << "æ•°æ®åº“è¿æ¥å¤±è´¥ï¼š" << db.lastError().text();
        return 1;
    }

    // 2. åˆ›å»ºç”¨æˆ·è¡¨ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
    QSqlQuery query;
    bool success = query.exec(R"(
        CREATE TABLE IF NOT EXISTS users (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            name TEXT NOT NULL,
            age INTEGER,
            email TEXT UNIQUE
        )
    )");
    if (!success) {
        qDebug() << "å»ºè¡¨å¤±è´¥ï¼š" << query.lastError().text();
        return 1;
    }

    // 3. æ’å…¥æ•°æ®ï¼ˆå¢ï¼‰
    query.prepare("INSERT INTO users (name, age, email) VALUES (?, ?, ?)");
    query.addBindValue("å¼ ä¸‰");
    query.addBindValue(25);
    query.addBindValue("zhangsan@example.com");
    query.exec();

    // 4. æŸ¥è¯¢æ•°æ®ï¼ˆæŸ¥ï¼‰
    query.exec("SELECT * FROM users");
    while (query.next()) { // éå†ç»“æœé›†
        int id = query.value("id").toInt();
        QString name = query.value("name").toString();
        int age = query.value("age").toInt();
        qDebug() << "ç”¨æˆ·" << id << ":" << name << age << "å²";
    }

    // 5. æ›´æ–°æ•°æ®ï¼ˆæ”¹ï¼‰
    query.exec("UPDATE users SET age = 26 WHERE name = 'å¼ ä¸‰'");

    // 6. åˆ é™¤æ•°æ®ï¼ˆåˆ ï¼‰
    query.exec("DELETE FROM users WHERE age < 20");

    db.close();
    return 0;
}
```


#### çº¯C++å¯¹æ¯”ï¼šç”¨SQLite C APIå®ç°ï¼ˆéœ€è¦æ‰‹åŠ¨ç®¡ç†å†…å­˜å’Œé”™è¯¯ï¼‰  
```cpp
#include <sqlite3.h>
#include <iostream>

int main() {
    sqlite3 *db;
    int rc = sqlite3_open("user.db", &db); // æ‰“å¼€æ•°æ®åº“
    if (rc != SQLITE_OK) { /* é”™è¯¯å¤„ç† */ }

    // å»ºè¡¨
    const char *createTableSql = "CREATE TABLE IF NOT EXISTS users (...);";
    char *errMsg = nullptr;
    rc = sqlite3_exec(db, createTableSql, nullptr, nullptr, &errMsg);
    if (rc != SQLITE_OK) { /* é”™è¯¯å¤„ç† */ }

    // æ’å…¥æ•°æ®ï¼ˆéœ€è¦æ‰‹åŠ¨ç»‘å®šå‚æ•°ï¼‰
    sqlite3_stmt *stmt;
    sqlite3_prepare_v2(db, "INSERT INTO users VALUES (?, ?, ?)", -1, &stmt, nullptr);
    sqlite3_bind_text(stmt, 1, "å¼ ä¸‰", -1, SQLITE_TRANSIENT);
    sqlite3_bind_int(stmt, 2, 25);
    sqlite3_step(stmt);
    sqlite3_finalize(stmt); // æ‰‹åŠ¨é‡Šæ”¾èµ„æº

    sqlite3_close(db);
}
```


**å…³é”®APIè®²è§£**ï¼š  
- `QSqlDatabase::addDatabase("QSQLITE")`ï¼šæŒ‡å®šæ•°æ®åº“ç±»å‹ï¼ˆQtæ”¯æŒ"QMYSQL"ã€"QODBC"ç­‰ï¼‰ã€‚  
- `QSqlQuery::prepare()`/`addBindValue()`ï¼šé¢„ç¼–è¯‘SQLè¯­å¥ï¼Œé˜²æ­¢SQLæ³¨å…¥ï¼ˆæ¯”ç›´æ¥æ‹¼æ¥å­—ç¬¦ä¸²æ›´å®‰å…¨ï¼‰ã€‚  


**æ˜“æ··æ·†ç‚¹**ï¼š  
- Qtçš„`QSqlQuery`ä¼šè‡ªåŠ¨ç®¡ç†ç»“æœé›†çš„å†…å­˜ï¼ˆ`query.next()`éå†å®Œä¼šè‡ªåŠ¨é‡Šæ”¾ï¼‰ï¼›çº¯C++éœ€è¦æ‰‹åŠ¨è°ƒç”¨`sqlite3_finalize`é‡Šæ”¾`stmt`ã€‚  
- æ•°æ®åº“äº‹åŠ¡ï¼šQtæ”¯æŒ`db.transaction()`å’Œ`db.commit()`ï¼Œç¡®ä¿æ‰¹é‡æ“ä½œçš„åŸå­æ€§ï¼ˆæ¯”å¦‚åŒæ—¶æ’å…¥10æ¡æ•°æ®ï¼Œå¤±è´¥åˆ™å…¨éƒ¨å›æ»šï¼‰ã€‚  


---


## æ¡ˆä¾‹11ï¼šå¤šçº¿ç¨‹â€”â€”åå°è®¡ç®—ä¸å¡ç•Œé¢ï¼ˆQThreadï¼‰  


### çŸ¥è¯†ç‚¹ï¼šQtå¤šçº¿ç¨‹ vs C++11 std::thread  
Qtçš„`QThread`ä¸ç•Œé¢ç»„ä»¶ï¼ˆå¦‚`QWidget`ï¼‰æ·±åº¦é›†æˆï¼Œæ”¯æŒé€šè¿‡ä¿¡å·æ§½åœ¨å­çº¿ç¨‹å’Œä¸»çº¿ç¨‹ä¹‹é—´å®‰å…¨é€šä¿¡ï¼›C++11çš„`std::thread`éœ€è¦æ‰‹åŠ¨å¤„ç†çº¿ç¨‹åŒæ­¥ï¼ˆå¦‚äº’æ–¥é”ï¼‰ã€‚  


#### ä¾‹å­11ï¼šåå°è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼ˆå­çº¿ç¨‹è®¡ç®—+ä¸»çº¿ç¨‹æ˜¾ç¤ºï¼‰  
```cpp
// Worker.hï¼ˆå­çº¿ç¨‹ä»»åŠ¡ç±»ï¼‰
#include <QObject>
#include <QThread>

class Worker : public QObject {
    Q_OBJECT
public:
    Worker(QObject *parent = nullptr) : QObject(parent) {}

public slots:
    void calculateFibonacci(int n) {
        // å­çº¿ç¨‹æ‰§è¡Œè®¡ç®—ï¼ˆä¸ä¼šå¡ç•Œé¢ï¼‰
        qint64 a = 0, b = 1;
        for (int i = 0; i < n; ++i) {
            qint64 temp = a;
            a = b;
            b = temp + b;
            emit progressUpdated(i + 1, a); // å‘é€è¿›åº¦å’Œç»“æœåˆ°ä¸»çº¿ç¨‹
        }
        emit calculationFinished(a);
    }

signals:
    void progressUpdated(int step, qint64 value);
    void calculationFinished(qint64 result);
};

// main.cppï¼ˆä¸»çº¿ç¨‹ç•Œé¢ï¼‰
#include <QApplication>
#include <QProgressBar> // è¿›åº¦æ¡
#include <QLabel>
#include <QPushButton>
#include <QVBoxLayout>
#include "Worker.h"

int main(int argc, char *argv[]) {
    QApplication app(argc, argv);

    QWidget window;
    QVBoxLayout *layout = new QVBoxLayout(&window);
    QProgressBar *progressBar = new QProgressBar;
    QLabel *resultLabel = new QLabel("ç»“æœï¼š");
    QPushButton *startBtn = new QPushButton("å¼€å§‹è®¡ç®—ï¼ˆn=30ï¼‰");
    layout->addWidget(progressBar);
    layout->addWidget(resultLabel);
    layout->addWidget(startBtn);

    // 1. åˆ›å»ºå­çº¿ç¨‹å’Œä»»åŠ¡å¯¹è±¡
    QThread thread;
    Worker *worker = new Worker;
    worker->moveToThread(&thread); // æŠŠä»»åŠ¡å¯¹è±¡ç§»åŠ¨åˆ°å­çº¿ç¨‹
    thread.start();

    // 2. æŒ‰é’®ç‚¹å‡»è§¦å‘è®¡ç®—
    QObject::connect(startBtn, &QPushButton::clicked, [worker]() {
        emit worker->calculateFibonacci(30); // è§¦å‘å­çº¿ç¨‹çš„æ§½å‡½æ•°
    });

    // 3. æ¥æ”¶å­çº¿ç¨‹çš„è¿›åº¦æ›´æ–°ï¼ˆè‡ªåŠ¨åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼‰
    QObject::connect(worker, &Worker::progressUpdated, [progressBar](int step, qint64 value) {
        progressBar->setRange(0, 30);
        progressBar->setValue(step);
    });

    // 4. æ¥æ”¶è®¡ç®—å®Œæˆä¿¡å·
    QObject::connect(worker, &Worker::calculationFinished, [resultLabel](qint64 result) {
        resultLabel->setText("ç»“æœï¼š" + QString::number(result));
    });

    window.resize(400, 150);
    window.show();
    int ret = app.exec();

    // æ¸…ç†èµ„æº
    thread.quit();
    thread.wait();
    delete worker;
    return ret;
}
```


#### çº¯C++å¯¹æ¯”ï¼šç”¨std::threadå®ç°ï¼ˆéœ€æ‰‹åŠ¨åŒæ­¥ï¼‰  
```cpp
#include <thread>
#include <mutex>
#include <atomic>

std::atomic<int> progress = 0;
std::mutex mtx;
qint64 result = 0;

void calculateFibonacci(int n) {
    qint64 a = 0, b = 1;
    for (int i = 0; i < n; ++i) {
        qint64 temp = a;
        a = b;
        b = temp + b;
        progress = i + 1; // åŸå­æ“ä½œä¿è¯çº¿ç¨‹å®‰å…¨
        std::this_thread::sleep_for(std::chrono::milliseconds(100));
    }
    std::lock_guard<std::mutex> lock(mtx);
    result = a;
}

int main() {
    std::thread t(calculateFibonacci, 30);
    // ä¸»çº¿ç¨‹éœ€è¦æ‰‹åŠ¨è½®è¯¢progressçš„å€¼æ¥æ›´æ–°ç•Œé¢ï¼ˆå¯èƒ½å¡ç•Œé¢ï¼‰
    while (progress < 30) {
        // æ›´æ–°è¿›åº¦æ¡...ï¼ˆéœ€æ‰‹åŠ¨åŠ é”ï¼‰
    }
    t.join();
}
```


**å…³é”®APIè®²è§£**ï¼š  
- `QObject::moveToThread(&thread)`ï¼šå°†å¯¹è±¡çš„äº‹ä»¶å¾ªç¯åˆ‡æ¢åˆ°æŒ‡å®šçº¿ç¨‹ï¼ˆå¯¹è±¡çš„æ§½å‡½æ•°ä¼šåœ¨è¯¥çº¿ç¨‹æ‰§è¡Œï¼‰ã€‚  
- ä¿¡å·æ§½è·¨çº¿ç¨‹ï¼šQtçš„ä¿¡å·æ§½åœ¨è·¨çº¿ç¨‹æ—¶ä¼šè‡ªåŠ¨æ’é˜Ÿï¼ˆé€šè¿‡äº‹ä»¶å¾ªç¯ï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨åŠ é”ï¼ˆå‰ææ˜¯ä¿¡å·çš„å‚æ•°æ˜¯Qtæ”¯æŒçš„ç±»å‹ï¼Œæˆ–æ³¨å†Œè¿‡å…ƒç±»å‹ï¼‰ã€‚  


**æ˜“æ··æ·†ç‚¹**ï¼š  
- å­çº¿ç¨‹ä¸­**ä¸èƒ½ç›´æ¥æ“ä½œç•Œé¢æ§ä»¶**ï¼ˆå¦‚`QLabel`ï¼‰ï¼Œå› ä¸ºç•Œé¢æ§ä»¶åªèƒ½åœ¨ä¸»çº¿ç¨‹ï¼ˆGUIçº¿ç¨‹ï¼‰æ›´æ–°ï¼›Qtçš„ä¿¡å·æ§½ä¼šè‡ªåŠ¨å°†è·¨çº¿ç¨‹ä¿¡å·è·¯ç”±åˆ°ä¸»çº¿ç¨‹æ‰§è¡Œã€‚  
- `QThread`çš„æ­£ç¡®ç”¨æ³•æ˜¯**å°†ä»»åŠ¡å¯¹è±¡ç§»åŠ¨åˆ°çº¿ç¨‹**ï¼Œè€Œä¸æ˜¯é‡å†™`run()`å‡½æ•°ï¼ˆé™¤ééœ€è¦è‡ªå®šä¹‰äº‹ä»¶å¾ªç¯ï¼‰ã€‚  


---


## æ¡ˆä¾‹12ï¼šäº‹ä»¶è¿‡æ»¤å™¨â€”â€”å…¨å±€ç›‘æ§é”®ç›˜è¾“å…¥ï¼ˆQObject::installEventFilterï¼‰  


### çŸ¥è¯†ç‚¹ï¼šäº‹ä»¶è¿‡æ»¤å™¨ vs é‡å†™äº‹ä»¶å‡½æ•°  
äº‹ä»¶è¿‡æ»¤å™¨å¯ä»¥åœ¨**å¤šä¸ªæ§ä»¶çš„äº‹ä»¶åˆ°è¾¾ç›®æ ‡å‰**ç»Ÿä¸€å¤„ç†ï¼ˆæ¯”å¦‚å…¨å±€ç›‘æ§é”®ç›˜è¾“å…¥ï¼‰ï¼›é‡å†™`keyPressEvent`åªèƒ½å¤„ç†å•ä¸ªæ§ä»¶çš„äº‹ä»¶ã€‚  


#### ä¾‹å­12ï¼šå…¨å±€ç›‘æ§F1é”®ï¼ˆæ‰€æœ‰æ§ä»¶æŒ‰ä¸‹F1éƒ½è§¦å‘å¸®åŠ©ï¼‰  
```cpp
#include <QApplication>
#include <QWidget>
#include <QLineEdit>
#include <QPushButton>
#include <QMessageBox> // æ¶ˆæ¯æ¡†

class EventFilter : public QObject {
    Q_OBJECT
protected:
    bool eventFilter(QObject *obj, QEvent *event) override {
        if (event->type() == QEvent::KeyPress) { // é”®ç›˜æŒ‰ä¸‹äº‹ä»¶
            QKeyEvent *keyEvent = static_cast<QKeyEvent *>(event);
            if (keyEvent->key() == Qt::Key_F1) { // F1é”®
                QMessageBox::information(nullptr, "å¸®åŠ©", "è¿™æ˜¯å¸®åŠ©æ–‡æ¡£ï¼");
                return true; // äº‹ä»¶å·²å¤„ç†ï¼Œä¸å†ä¼ é€’ç»™ç›®æ ‡æ§ä»¶
            }
        }
        return QObject::eventFilter(obj, event); // å…¶ä»–äº‹ä»¶æ­£å¸¸ä¼ é€’
    }
};

int main(int argc, char *argv[]) {
    QApplication app(argc, argv);

    QWidget window;
    QLineEdit *edit = new QLineEdit(&window);
    QPushButton *btn = new QPushButton("æŒ‰é’®", &window);
    edit->move(50, 50);
    btn->move(50, 100);

    // 1. å®‰è£…äº‹ä»¶è¿‡æ»¤å™¨åˆ°æ•´ä¸ªåº”ç”¨ç¨‹åº
    EventFilter filter;
    app.installEventFilter(&filter); // æ‰€æœ‰æ§ä»¶çš„äº‹ä»¶éƒ½ä¼šç»è¿‡filter

    window.resize(300, 200);
    window.show();
    return app.exec();
}
```


**å…³é”®APIè®²è§£**ï¼š  
- `QApplication::installEventFilter(QObject *filterObj)`ï¼šä¸ºæ•´ä¸ªåº”ç”¨ç¨‹åºå®‰è£…äº‹ä»¶è¿‡æ»¤å™¨ï¼ˆæ‰€æœ‰æ§ä»¶çš„äº‹ä»¶éƒ½ä¼šè¢«è¿‡æ»¤ï¼‰ã€‚  
- `eventFilter(QObject *obj, QEvent *event)`ï¼šè¿”å›`true`è¡¨ç¤ºäº‹ä»¶è¢«æ‹¦æˆªï¼ˆä¸å†ä¼ é€’ç»™ç›®æ ‡æ§ä»¶ï¼‰ï¼Œè¿”å›`false`è¡¨ç¤ºç»§ç»­ä¼ é€’ã€‚  


**æ˜“æ··æ·†ç‚¹**ï¼š  
- äº‹ä»¶è¿‡æ»¤å™¨å¯ä»¥å®‰è£…åˆ°å•ä¸ªæ§ä»¶ï¼ˆå¦‚`edit->installEventFilter(&filter)`ï¼‰ï¼Œæˆ–æ•´ä¸ªåº”ç”¨ï¼ˆ`app.installEventFilter`ï¼‰ã€‚  
- äº‹ä»¶çš„ä¼ é€’é¡ºåºï¼šå…¨å±€äº‹ä»¶è¿‡æ»¤å™¨ â†’ çˆ¶æ§ä»¶çš„äº‹ä»¶è¿‡æ»¤å™¨ â†’ ç›®æ ‡æ§ä»¶çš„`event()`å‡½æ•° â†’ ç›®æ ‡æ§ä»¶çš„å…·ä½“äº‹ä»¶å‡½æ•°ï¼ˆå¦‚`keyPressEvent`ï¼‰ã€‚  


---


## æ¡ˆä¾‹13ï¼šå±æ€§ç³»ç»Ÿâ€”â€”åŠ¨æ€ä¿®æ”¹æ§ä»¶å±æ€§ï¼ˆQ_PROPERTYï¼‰  


### çŸ¥è¯†ç‚¹ï¼šQ_PROPERTY vs C++æˆå‘˜å˜é‡  
`Q_PROPERTY`æ˜¯Qtçš„å…ƒå¯¹è±¡å±æ€§ç³»ç»Ÿï¼Œæ”¯æŒé€šè¿‡å­—ç¬¦ä¸²åç§°åŠ¨æ€è®¿é—®å±æ€§ï¼ˆå¦‚æ ·å¼è¡¨ã€åŠ¨ç”»ï¼‰ï¼Œæ¯”æ™®é€šæˆå‘˜å˜é‡æ›´çµæ´»ã€‚  


#### ä¾‹å­13ï¼šè‡ªå®šä¹‰æ§ä»¶çš„â€œé€æ˜åº¦â€å±æ€§ï¼ˆé…åˆåŠ¨ç”»ï¼‰  
```cpp
// TransparentWidget.h
#include <QWidget>
#include <QPropertyAnimation> // å±æ€§åŠ¨ç”»ç±»

class TransparentWidget : public QWidget {
    Q_OBJECT
    Q_PROPERTY(qreal opacity READ opacity WRITE setOpacity) // å£°æ˜å±æ€§
public:
    TransparentWidget(QWidget *parent = nullptr) : QWidget(parent) {
        setStyleSheet("background: blue;"); // è“è‰²èƒŒæ™¯
        resize(100, 100);
    }

    qreal opacity() const { return m_opacity; }
    void setOpacity(qreal opacity) {
        m_opacity = qBound(0.0, opacity, 1.0); // é™åˆ¶åœ¨0-1ä¹‹é—´
        update(); // è§¦å‘é‡ç»˜
    }

protected:
    void paintEvent(QPaintEvent *) override {
        QPainter painter(this);
        painter.setOpacity(m_opacity); // è®¾ç½®ç»˜åˆ¶é€æ˜åº¦
        painter.fillRect(rect(), palette().window()); // ç»˜åˆ¶èƒŒæ™¯
    }

private:
    qreal m_opacity = 1.0; // åˆå§‹ä¸é€æ˜
};

// main.cpp
#include <QApplication>
#include "TransparentWidget.h"

int main(int argc, char *argv[]) {
    QApplication app(argc, argv);

    TransparentWidget widget;
    widget.show();

    // åˆ›å»ºå±æ€§åŠ¨ç”»ï¼š5ç§’å†…ä»å®Œå…¨ä¸é€æ˜åˆ°å®Œå…¨é€æ˜
    QPropertyAnimation *animation = new QPropertyAnimation(&widget, "opacity");
    animation->setDuration(5000);
    animation->setStartValue(1.0);
    animation->setEndValue(0.0);
    animation->start();

    return app.exec();
}
```


**å…³é”®APIè®²è§£**ï¼š  
- `Q_PROPERTY`å®ï¼šå£°æ˜å±æ€§çš„è¯»å†™å‡½æ•°ï¼ˆ`READ`/`WRITE`ï¼‰ï¼Œå±æ€§åï¼ˆå¦‚`opacity`ï¼‰å¯ä»¥è¢«åŠ¨ç”»ã€æ ·å¼è¡¨ç­‰ä½¿ç”¨ã€‚  
- `QPropertyAnimation`ï¼šé€šè¿‡å±æ€§åï¼ˆå­—ç¬¦ä¸²ï¼‰é©±åŠ¨å±æ€§å˜åŒ–ï¼ˆå¦‚`"opacity"`ï¼‰ï¼Œå®ç°å¹³æ»‘åŠ¨ç”»ã€‚  


**æ˜“æ··æ·†ç‚¹**ï¼š  
- å±æ€§çš„ç±»å‹å¿…é¡»æ˜¯Qtå…ƒå¯¹è±¡ç³»ç»Ÿæ”¯æŒçš„ç±»å‹ï¼ˆå¦‚`qreal`ã€`QString`ï¼‰ï¼Œè‡ªå®šä¹‰ç±»å‹éœ€è¦ç”¨`Q_DECLARE_METATYPE`æ³¨å†Œã€‚  
- `setOpacity`å‡½æ•°ä¿®æ”¹å±æ€§åï¼Œå¿…é¡»è°ƒç”¨`update()`è§¦å‘é‡ç»˜ï¼Œå¦åˆ™ç•Œé¢ä¸ä¼šæ›´æ–°ã€‚  


---


## æ¡ˆä¾‹14ï¼šå›½é™…åŒ–â€”â€”å¤šè¯­è¨€æ”¯æŒï¼ˆtr()å‡½æ•°+Qt Linguistï¼‰  


### çŸ¥è¯†ç‚¹ï¼šQtå›½é™…åŒ– vs æ‰‹åŠ¨å­—ç¬¦ä¸²æ›¿æ¢  
Qté€šè¿‡`tr()`æ ‡è®°éœ€è¦ç¿»è¯‘çš„æ–‡æœ¬ï¼Œé…åˆ`lupdate`ç”Ÿæˆç¿»è¯‘æ–‡ä»¶ï¼ˆ`.ts`ï¼‰ï¼Œç”¨`Qt Linguist`å¯è§†åŒ–ç¿»è¯‘ï¼Œæœ€ç»ˆé€šè¿‡`QTranslator`åŠ è½½ç¿»è¯‘æ–‡ä»¶å®ç°å¤šè¯­è¨€ã€‚  


#### ä¾‹å­14ï¼šä¸­è‹±æ–‡åˆ‡æ¢çš„ç™»å½•ç•Œé¢  
```cpp
// main.cpp
#include <QApplication>
#include <QTranslator> // ç¿»è¯‘åŠ è½½ç±»
#include <QComboBox>   // ä¸‹æ‹‰æ¡†ï¼ˆé€‰æ‹©è¯­è¨€ï¼‰
#include <QPushButton>
#include <QVBoxLayout>

int main(int argc, char *argv[]) {
    QApplication app(argc, argv);

    QWidget window;
    QVBoxLayout *layout = new QVBoxLayout(&window);

    // 1. åˆ›å»ºç¿»è¯‘å™¨
    QTranslator translator;
    QComboBox *langCombo = new QComboBox;
    langCombo->addItem("ä¸­æ–‡", "zh_CN");
    langCombo->addItem("English", "en_US");

    // 2. ä¸‹æ‹‰æ¡†é€‰æ‹©è¯­è¨€æ—¶åˆ‡æ¢ç¿»è¯‘
    QObject::connect(langCombo, &QComboBox::currentIndexChanged, [&](int index) {
        QString lang = langCombo->itemData(index).toString();
        translator.load("app_" + lang + ".qm"); // åŠ è½½ç¿»è¯‘æ–‡ä»¶ï¼ˆå¦‚app_zh_CN.qmï¼‰
        app.installTranslator(&translator); // åº”ç”¨ç¿»è¯‘
    });

    // 3. ç”¨tr()æ ‡è®°éœ€è¦ç¿»è¯‘çš„æ–‡æœ¬
    QPushButton *loginBtn = new QPushButton(QObject::tr("ç™»å½•"));
    layout->addWidget(langCombo);
    layout->addWidget(loginBtn);

    window.resize(300, 150);
    window.show();
    return app.exec();
}
```


**æ“ä½œæ­¥éª¤**ï¼š  
1. åœ¨ä»£ç ä¸­ç”¨`tr("éœ€è¦ç¿»è¯‘çš„æ–‡æœ¬")`æ ‡è®°æ‰€æœ‰éœ€è¦ç¿»è¯‘çš„å­—ç¬¦ä¸²ã€‚  
2. ç”¨å‘½ä»¤`lupdate main.cpp -ts app_zh_CN.ts`ç”Ÿæˆä¸­æ–‡ç¿»è¯‘æ–‡ä»¶ï¼ˆ`.ts`ï¼‰ã€‚  
3. ç”¨`Qt Linguist`æ‰“å¼€`.ts`æ–‡ä»¶ï¼Œå¡«å†™ç¿»è¯‘ï¼ˆå¦‚å°†"ç™»å½•"ç¿»è¯‘æˆ"Login"ï¼‰ã€‚  
4. ç¼–è¯‘ç¿»è¯‘æ–‡ä»¶ä¸º`.qm`ï¼ˆäºŒè¿›åˆ¶æ ¼å¼ï¼‰ï¼š`lrelease app_zh_CN.ts`ã€‚  
5. ç¨‹åºè¿è¡Œæ—¶åŠ è½½`.qm`æ–‡ä»¶ï¼Œç•Œé¢ä¼šè‡ªåŠ¨æ˜¾ç¤ºç¿»è¯‘åçš„æ–‡æœ¬ã€‚  


**å…³é”®APIè®²è§£**ï¼š  
- `QObject::tr()`ï¼šæ ‡è®°éœ€è¦ç¿»è¯‘çš„æ–‡æœ¬ï¼ŒQtä¼šæ ¹æ®å½“å‰åŠ è½½çš„ç¿»è¯‘æ–‡ä»¶æ›¿æ¢ä¸ºå¯¹åº”è¯­è¨€ã€‚  
- `QTranslator::load()`ï¼šåŠ è½½ç¼–è¯‘åçš„ç¿»è¯‘æ–‡ä»¶ï¼ˆ`.qm`ï¼‰ã€‚  


**æ˜“æ··æ·†ç‚¹**ï¼š  
- ç¿»è¯‘æ–‡ä»¶çš„å‘½åï¼šé€šå¸¸ä¸º`é¡¹ç›®å_è¯­è¨€ä»£ç .qm`ï¼ˆå¦‚`app_zh_CN.qm`ï¼‰ï¼Œè¯­è¨€ä»£ç éµå¾ªISO 639-1æ ‡å‡†ã€‚  
- `tr()`å‡½æ•°å¿…é¡»åœ¨`Q_OBJECT`ç±»ä¸­ä½¿ç”¨ï¼ˆéQObjectç±»éœ€è¦ç”¨`QCoreApplication::translate`ï¼‰ã€‚  


---


## æ¡ˆä¾‹15ï¼šæ ·å¼è¡¨â€”â€”ç”¨QSSç¾åŒ–ç•Œé¢ï¼ˆç±»ä¼¼CSSï¼‰  


### çŸ¥è¯†ç‚¹ï¼šQSS vs çº¯C++æ‰‹åŠ¨è®¾ç½®æ ·å¼  
QSSï¼ˆQt Style Sheetsï¼‰å…è®¸ç”¨ç±»ä¼¼CSSçš„è¯­æ³•è‡ªå®šä¹‰æ§ä»¶æ ·å¼ï¼Œæ¯”æ‰‹åŠ¨è°ƒç”¨`setStyleSheet()`è®¾ç½®å•ä¸ªå±æ€§æ›´é«˜æ•ˆã€æ˜“ç»´æŠ¤ã€‚  


#### ä¾‹å­15ï¼šç°ä»£é£æ ¼çš„æŒ‰é’®ï¼ˆæ‚¬åœåŠ¨ç”»+é˜´å½±ï¼‰  
```cpp
#include <QApplication>
#include <QPushButton>
#include <QVBoxLayout>

int main(int argc, char *argv[]) {
    QApplication app(argc, argv);

    QWidget window;
    QVBoxLayout *layout = new QVBoxLayout(&window);
    QPushButton *btn = new QPushButton("ç‚¹å‡»æˆ‘");

    // QSSæ ·å¼è¡¨ï¼ˆç±»ä¼¼CSSï¼‰
    btn->setStyleSheet(R"(
        QPushButton {
            background: #4CAF50;          /* ç»¿è‰²èƒŒæ™¯ */
            color: white;                 /* ç™½è‰²æ–‡å­— */
            border: none;                 /* æ— è¾¹æ¡† */
            border-radius: 8px;           /* åœ†è§’ */
            padding: 12px 24px;           /* å†…è¾¹è· */
            font-size: 16px;              /* å­—ä½“å¤§å° */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* é˜´å½± */
            transition: all 0.3s ease;    /* è¿‡æ¸¡åŠ¨ç”» */
        }
        QPushButton:hover {
            background: #45a049;          /* æ‚¬åœæ—¶é¢œè‰²åŠ æ·± */
            transform: translateY(-2px);   /* å‘ä¸Šç§»åŠ¨2px */
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2); /* é˜´å½±å˜æ·± */
        }
        QPushButton:pressed {
            background: #3d8b40;          /* æŒ‰ä¸‹æ—¶é¢œè‰²æ›´æ·± */
            transform: translateY(0);      /* å›åˆ°åŸä½ç½® */
        }
    )");

    layout->addWidget(btn, 0, Qt::AlignCenter); // æŒ‰é’®å±…ä¸­
    window.resize(300, 200);
    window.show();
    return app.exec();
}
```


**å…³é”®APIè®²è§£**ï¼š  
- `setStyleSheet()`ï¼šè®¾ç½®QSSæ ·å¼è¡¨ï¼Œæ”¯æŒä¼ªçŠ¶æ€ï¼ˆ`:hover`æ‚¬åœã€`:pressed`æŒ‰ä¸‹ï¼‰å’ŒCSSå±æ€§ï¼ˆ`border-radius`åœ†è§’ã€`box-shadow`é˜´å½±ï¼‰ã€‚  
- `transition`ï¼šå®šä¹‰å±æ€§å˜åŒ–çš„è¿‡æ¸¡åŠ¨ç”»ï¼ˆå¦‚æ‚¬åœæ—¶èƒŒæ™¯è‰²å’Œä½ç½®çš„å˜åŒ–ï¼‰ã€‚  


**æ˜“æ··æ·†ç‚¹**ï¼š  
- QSSçš„é€‰æ‹©å™¨ï¼šå¯ä»¥æŒ‡å®šå…·ä½“æ§ä»¶ç±»å‹ï¼ˆ`QPushButton`ï¼‰ã€å¯¹è±¡åï¼ˆ`#myBtn`ï¼‰æˆ–ç±»åï¼ˆ`.MyClass`ï¼‰ã€‚  
- åŠ¨ç”»æ•ˆæœï¼šQSSçš„`transition`ä»…æ”¯æŒéƒ¨åˆ†å±æ€§ï¼ˆå¦‚`background`ã€`transform`ï¼‰ï¼Œå¤æ‚åŠ¨ç”»éœ€è¦é…åˆ`QPropertyAnimation`ã€‚  


---


# æ€»ç»“ï¼š10ä¸ªæ¡ˆä¾‹è¦†ç›–çš„æ ¸å¿ƒèƒ½åŠ›  


| æ¡ˆä¾‹       | æ ¸å¿ƒèƒ½åŠ›                          | Qtä¼˜åŠ¿                                  |
|------------|-----------------------------------|-----------------------------------------|
| å¸ƒå±€ç®¡ç†   | ç•Œé¢è‡ªåŠ¨é€‚é…å±å¹•                  | é¿å…æ‰‹åŠ¨è®¡ç®—åæ ‡ï¼Œè·¨åˆ†è¾¨ç‡å…¼å®¹          |
| è‡ªå®šä¹‰æ§ä»¶ | ç»˜åˆ¶å¤æ‚å›¾å½¢                      | QPainterç®€åŒ–ç»˜å›¾ï¼Œæ”¯æŒæŠ—é”¯é½¿ã€æ¸å˜      |
| æ–‡ä»¶æ“ä½œ   | è¯»å–CSV/é…ç½®æ–‡ä»¶                  | è‡ªåŠ¨å¤„ç†ç¼–ç ï¼Œè·¨å¹³å°æ¢è¡Œç¬¦å…¼å®¹          |
| ç½‘ç»œé€šä¿¡   | TCP/UDPé€šä¿¡                       | ä¿¡å·æ§½å¼‚æ­¥å¤„ç†ï¼Œæ— éœ€æ‰‹åŠ¨ç®¡ç†Socket      |
| æ•°æ®åº“æ“ä½œ | SQLite/MySQLè¿æ¥                  | å°è£…SQLite C APIï¼Œæ”¯æŒé¢„ç¼–è¯‘é˜²æ­¢æ³¨å…¥    |
| å¤šçº¿ç¨‹     | åå°ä»»åŠ¡ä¸å¡ç•Œé¢                  | ä¿¡å·æ§½å®‰å…¨è·¨çº¿ç¨‹é€šä¿¡ï¼Œæ— éœ€æ‰‹åŠ¨åŠ é”      |
| äº‹ä»¶è¿‡æ»¤   | å…¨å±€äº‹ä»¶ç›‘æ§                      | ç»Ÿä¸€å¤„ç†å¤šä¸ªæ§ä»¶çš„äº‹ä»¶                  |
| å±æ€§ç³»ç»Ÿ   | åŠ¨æ€ä¿®æ”¹æ§ä»¶å±æ€§ï¼ˆå¦‚åŠ¨ç”»ï¼‰        | æ”¯æŒé€šè¿‡å­—ç¬¦ä¸²åç§°è®¿é—®å±æ€§              |
| å›½é™…åŒ–     | å¤šè¯­è¨€æ”¯æŒ                        | å¯è§†åŒ–ç¿»è¯‘å·¥å…·ï¼ˆQt Linguistï¼‰           |
| æ ·å¼è¡¨     | ç•Œé¢ç¾åŒ–                          | ç±»ä¼¼CSSçš„è¯­æ³•ï¼Œæ”¯æŒæ‚¬åœ/æŒ‰ä¸‹åŠ¨ç”»        |


ç°åœ¨ï¼ŒæŠŠè¿™äº›ä¾‹å­é€ä¸ªæ•²ä¸€éï¼Œé‡åˆ°ä¸ç†è§£çš„APIæŸ¥Qtæ–‡æ¡£ï¼ˆå®˜æ–¹æ–‡æ¡£è¶…è¯¦ç»†ï¼ï¼‰ï¼Œä½ ä¼šå‘ç°Qtçš„æ¯ä¸ªè®¾è®¡éƒ½æ˜¯ä¸ºäº†â€œè®©å¼€å‘è€…å°‘å†™ä»£ç ï¼Œå¤šå…³æ³¨ä¸šåŠ¡â€ã€‚åšæŒ1ä¸ªæœˆï¼Œä½ å°±èƒ½ç‹¬ç«‹å¼€å‘ä¸€ä¸ªå®Œæ•´çš„æ¡Œé¢åº”ç”¨å•¦ï¼æœ‰é—®é¢˜éšæ—¶é—®ï¼Œæˆ‘å¸®ä½ é¿å‘~ ğŸ˜Š